
{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <link rel="stylesheet" href="{% static 'css/base.css' %}">
    <title>My Internet Radio</title>
</head>
<body>
    <h1><i class="bi bi-broadcast"></i> MyRadioApp</h1>
    <div class="container my-5 text-center">
      <div class="position-relative p-5 text-center text-muted bg-body border border-dashed rounded-5 d-flex align-items-center justify-content-center">
        <form method="post">
          {% csrf_token %}
          {{ form.as_p }}
          <button type="submit" class="btn btn-primary text-bg-dark"><i class="bi bi-search"></i> Search</button>
      </form>
      </div>
    </div>
        
    {% if searched %}
      {% if search_result %}
      <div class="modal modal-sheet position-static d-block bg-body-secondary p-4 py-md-5">
        <div class="container px-4 py-5" id="custom-cards">
            <h2 class="pb-2 border-bottom">Results</h2>
            <!-- Display the response data here -->
            <!-- Layout core from Bootstrap features examples -->
            <!-- https://getbootstrap.com/docs/5.3/examples/features/ -->
            <div class="row row-cols-1 row-cols-lg-3 align-items-stretch g-4 py-5">
            {% for result in search_result %}
              <div class="col">
                <div class="card card-cover h-100 overflow-hidden text-bg-dark rounded-4 shadow-lg" id="search_result_card">
                  <div class="d-flex flex-column h-100 p-5 pb-3 text-white text-shadow-1">
                    <h3 class="mb-4 display-6 lh-1 fw-bold">{{ result.name }}</h3>

                    <!-- <audio src="{{ result.url }}" controls>
                      Your browser does not support the audio element.
                    </audio> -->

                    <div id="audio-player-container">
                      <audio src="{{ result.url }}">
                        Your browser does not support the audio element.
                      </audio>
                      <button id="play-icon" class="audio-player-button text-bg-dark"><i class="bi bi-play-fill fs-1"></i></button>
                      <button id="pause-icon" class="audio-player-button text-bg-dark d-none"><i class="bi bi-pause-fill fs-1"></i></button>
                    </div>

                    <ul class="d-flex list-unstyled mt-auto">
                      <li class="me-auto">
                        {% if result.favicon %}
                            <img src="{{ result.favicon }}" alt="radio station logo" width="32" height="32" class="rounded-circle border border-white">
                        {% else %}
                            <img src="https://cdn-icons-png.flaticon.com/512/7581/7581950.png" alt="default radio logo" width="32" height="32" class="rounded-circle border border-white">
                        {% endif %}
                            
                      </li>
                      <li class="d-flex align-items-center me-3">
                        <svg class="bi me-2" width="1em" height="1em"><use xlink:href="#geo-fill"/></svg>
                        <small>{{ result.countrycode }}</small>
                      </li>
                      <li class="d-flex align-items-center">
                        <svg class="bi me-2" width="1em" height="1em"><use xlink:href="#calendar3"/></svg>
                        <a href="{{ result.homepage }}" target="_blank"><small>Station link</small></a>
                      </li>
                    </ul>
                  </div>
                </div>
              </div>
          {% endfor %}
            </div>
        </div>
          <div class="b-example-divider"></div>
      </div>
      {% else %}
      <div class="modal modal-sheet position-static d-block bg-body-secondary p-4 py-md-5" tabindex="-1" role="dialog" id="modalSheet">
        <div class="modal-dialog" role="document">
          <div class="modal-content rounded-4 shadow">
            <div class="modal-header border-bottom-0">
              <h2 class="modal-title fs-5">No results</h2>
            </div>
            <div class="modal-body py-0">
              <p>Unfortunately no results were found for your search, check your spelling and try again!</p>
            </div>
          </div>
        </div>
      </div>
      {% endif %}
    {% endif %}
</body>

<script src="{% static 'js/script.js' %}"></script>
</html>